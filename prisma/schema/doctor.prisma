model Doctor {
    id String @id @default(uuid())

    name          String
    email         String    @unique
    profilePhoto  String?
    contactNumber String?
    address       String?
    isDeleted     Boolean   @default(false)
    deletedAt     DateTime?

    registrationNumber  String @unique
    experience          Int?
    gender              Gender
    appointmentFee      Float
    qualification       String
    currentWorkingPlace String
    designation         String
    averageRating       Float  @default(0.0)

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    //relations
    userId String @unique
    user   User   @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: Cascade)

    specialties DoctorSpeciality[]

    @@index([email], name: "idx_doctor_email")
    @@index([isDeleted], name: "idx_doctor_isDeleted")
    @@map("doctor")
}

model DoctorSpeciality {
    id          String @id @default(uuid())
    doctorId    String
    specialtyId String

    doctor    Doctor     @relation(fields: [doctorId], references: [id], onDelete: Cascade, onUpdate: Cascade)
    specialty Speciality @relation(fields: [specialtyId], references: [id], onDelete: Cascade, onUpdate: Cascade)

    @@unique([doctorId, specialtyId])
    @@index([doctorId], name: "idx_doctor_speciality_doctorId")
    @@index([specialtyId], name: "idx_doctor_speciality_specialtyId")
    @@map("doctorSpecialty")
}
